{{page-title "Scheduled Job Details"}}

<AuMainContainer as |m|>
  <m.sidebar>
    <div class="au-c-sidebar">
      <div class="au-c-sidebar__content">
        <div class="au-u-padding au-u-padding-top">
          <AuLink
            @route="overview.scheduled-jobs"
            @skin="button"
            @icon="nav-left"
            @iconAlignment="left"
            @width="inline">
            Back to overview
          </AuLink>
          {{!--Job info--}}
          <AuHeading
            @level="3"
            @skin="3"
            class="au-u-margin-top au-u-margin-bottom">
            Job details
          </AuHeading>
          <dl class="au-u-flex--inline au-u-flex--wrap au-u-flex--spaced">
            <div>
              <dt class="au-u-bold">Title</dt>
              <dd>{{this.job.title}}</dd>
            </div>
            <div>
              <dt class="au-u-bold">URI</dt>
              <dd>{{this.job.uri}}</dd>
            </div>
            <div>
              <dt class="au-u-bold">Schedule</dt>
              <dd>{{this.cronDescription}}</dd>
            </div>
            <div>
              <dt class="au-u-bold">Created</dt>
              <dd>{{format-date this.job.created}}</dd>
            </div>
            <div>
              <dt class="au-u-bold">Modified</dt>
              <dd>{{format-date this.job.modified}}</dd>
            </div>
            <div>
              <dt class="au-u-bold">Creator</dt>
              {{this.job.creator}}
            </div>
            {{#if this.job.comment}}
              <div>
                <dt class="au-u-bold">Comments</dt>
                <dd>{{this.job.comment}}</dd>
              </div>
            {{/if}}
            {{#if this.job.error.message}}
              <div>
                <dt class="au-u-hidden-visually">Errors</dt>
                <AuAlert
                  @icon="cross"
                  @title="Error"
                  @skin="error">
                  <p>
                    <dd>{{this.job.error.message}}</dd>
                  </p>
                </AuAlert>
              </div>
            {{/if}}
          </dl>
          {{!--End job info--}}
        </div>
      </div>
      <div class="au-c-sidebar__footer">
        <AuLink
          @skin="button"
          @icon="pencil"
          @iconAlignment="left"
          @route="scheduled-job.details.edit"
          @model={{this.job.id}}>
          Edit
        </AuLink>
        <AuButton
          @skin="primary"
          @icon="trash"
          @iconAlignment="left"
          @width="inline"
          @wrap={{this.wrap}}
          @alert={{true}}
          @loading={{this.deleteJob.isRunning}}
          @loadingMessage="Deleting"
          {{on "click" (perform this.deleteJob)}}>
          Delete
        </AuButton>
      </div>
    </div>
  </m.sidebar>
  <m.content @scroll={{true}}>
    <div class="au-u-flex au-u-flex--column full-height">
      <AuTabs
        class="au-u-margin-top"
        as |Tab|>
        <Tab>
          <AuLink
            @route="scheduled-job.details.index"
            @model={{this.job.id}}>
            Details
          </AuLink>
        </Tab>
        <Tab>
          <AuLink
            @route="scheduled-job.details.executions"
            @model={{this.job.id}}>
            Executions
          </AuLink>
        </Tab>
      </AuTabs>
      
      {{outlet}}
    </div>
  </m.content>
</AuMainContainer>
